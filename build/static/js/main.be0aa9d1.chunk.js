(this["webpackJsonpreact-upload-download-files"]=this["webpackJsonpreact-upload-download-files"]||[]).push([[0],{38:function(e,t,a){e.exports=a(72)},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),s=a(15),i=a(6),o=a(12),m=a.n(o),u=a(13),p=a(16),d=a(32),E=a(11),f=a(37),v=a(14),b=a.n(v),h=a(75),g=a(74),w=a(34),N=a(76),j="http://localhost:10000",O=function(e){var t=Object(n.useState)(null),a=Object(E.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),i=Object(E.a)(s,2),o=i[0],v=i[1],O=Object(n.useState)({title:"",description:""}),x=Object(E.a)(O,2),y=x[0],k=x[1],S=Object(n.useState)(""),D=Object(E.a)(S,2),C=D[0],P=D[1],I=Object(n.useState)(!1),R=Object(E.a)(I,2),F=R[0],T=R[1],B=Object(n.useRef)(),L=function(e){k(Object(d.a)({},y,Object(p.a)({},e.target.name,e.target.value)))},_=function(e){"over"===e?B.current.style.border="2px solid #000":"leave"===e&&(B.current.style.border="2px dashed #e9ebeb")},A=function(){var t=Object(u.a)(m.a.mark((function t(a){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,n=y.title,r=y.description,""===n.trim()||""===r.trim()){t.next=18;break}if(!l){t.next=15;break}return(c=new FormData).append("file",l),c.append("title",n),c.append("description",r),P(""),t.next=12,b.a.post("".concat(j,"/upload"),c,{headers:{"Content-Type":"multipart/form-data"}});case 12:e.history.push("/list"),t.next=16;break;case 15:P("Please select a file to add.");case 16:t.next=19;break;case 18:P("Please enter all the field values.");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),t.t0.response&&P(t.t0.response.data);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"ap"},r.a.createElement(h.a,{className:"search-form",onSubmit:A},C&&r.a.createElement("p",{className:"errorMsg"},C),r.a.createElement(g.a,null,r.a.createElement(w.a,{className:" container inp"},r.a.createElement(h.a.Group,{controlId:"title",className:"webflow-style-input"},r.a.createElement("input",{type:"text",name:"title",value:y.title||"",placeholder:"Enter title",onChange:L})))),r.a.createElement(g.a,null,r.a.createElement(w.a,{className:"container inp"},r.a.createElement(h.a.Group,{controlId:"description",className:"webflow-style-input"},r.a.createElement("input",{type:"text",name:"description",value:y.description||"",placeholder:"Enter description",onChange:L})))),r.a.createElement("div",{className:"upload-section"},r.a.createElement(f.a,{onDrop:function(e){var t=Object(E.a)(e,1)[0];c(t);var a=new FileReader;a.onload=function(){v(a.result)},a.readAsDataURL(t),T(t.name.match(/\.(jpeg|jpg|png)$/)),B.current.style.border="2px dashed #e9ebeb"},onDragEnter:function(){return _("over")},onDragLeave:function(){return _("leave")}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({},t({className:"drop-zone"}),{ref:B}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drag and drop a file OR click here to select a file"),l&&r.a.createElement("div",null,r.a.createElement("strong",null,"Selected file:")," ",l.name))})),o?F?r.a.createElement("div",{className:"image-preview"},r.a.createElement("img",{className:"preview-image",src:o,alt:"Preview"})):r.a.createElement("div",{className:"preview-message"},r.a.createElement("p",null,"No preview available for this file")):r.a.createElement("div",{className:"preview-message"},r.a.createElement("p",null,"Image preview"))),r.a.createElement(N.a,{variant:"primary",type:"submit",className:"custom-btn btn-8"},"Submit")))},x=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"tp"},r.a.createElement("div",{class:"hero"},r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-md-12 text-center"},r.a.createElement("h3",{class:"animate-charcter"}," Book store")))))),r.a.createElement("div",{className:"header"},r.a.createElement("nav",null,r.a.createElement(s.b,{activeClassName:"active",to:"/",exact:!0},"Home"),r.a.createElement(s.b,{activeClassName:"active",to:"/list"},"Books List"))))},y=a(36),k=a.n(y),S=function(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(E.a)(c,2),i=s[0],o=s[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(j,"/getAllFiles"));case 3:t=e.sent,a=t.data,o(""),l(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&o(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=function(){var e=Object(u.a)(m.a.mark((function e(t,a,n){var r,l,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(j,"/download/").concat(t),{responseType:"blob"});case 3:return r=e.sent,l=a.split("/"),c=l[l.length-1],o(""),e.abrupt("return",k()(r.data,c,n));case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&o("Error while downloading file. Try again later");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"files"},i&&r.a.createElement("p",{className:"errorMsg"},i),r.a.createElement("table",{className:"files-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Download File"))),r.a.createElement("tbody",null,a.length>0?a.map((function(e){var t=e._id,a=e.title,n=e.description,l=e.file_path,c=e.file_mimetype;return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"file-title"},a),r.a.createElement("td",{className:"file-description"},n),r.a.createElement("td",null,r.a.createElement("a",{href:"#/",onClick:function(){return p(t,l,c)}},"Download")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,style:{fontWeight:"300"}},"No files found. Please add some.")))))},D=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(x,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(i.c,null,r.a.createElement(i.a,{component:O,path:"/",exact:!0}),r.a.createElement(i.a,{component:S,path:"/list"})))))};a(70),a(71);c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.be0aa9d1.chunk.js.map